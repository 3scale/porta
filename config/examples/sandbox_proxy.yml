base: &default
  test_api_hosts:
    - echo-api.3scale.net
    - hello-world-api.3scale.net
  ignore_test_failures: []
  # Backend endpoint as visible by apicast (host.containers.internal in podman)
  backend_endpoint: http://host.docker.internal:3001
  verify_mode: <%= OpenSSL::SSL::VERIFY_NONE %>
  debug: true
  override: 'http://localhost:8091'
  sandbox_endpoint: 'https://%{system_name}-%{account_id}.staging.%{env}apicast.io:%{port}'
  hosted_proxy_endpoint: 'https://%{system_name}-%{account_id}.%{env}apicast.io:%{port}'
  # APIcast endpoints as visible from the client
  apicast_staging_endpoint: 'http://%{system_name}-%{account_id}.staging.%{env}apicast.dev.localhost:8080'
  apicast_production_endpoint: 'http://%{system_name}-%{account_id}.%{env}apicast.dev.localhost:8000'
  skip_deploy: false
  apicast_registry_url: <%= ENV['APICAST_REGISTRY_URL'] %>
  self_managed_apicast_registry_url: <%= ENV['APICAST_REGISTRY_URL'] %>

development:
  <<: *default
  test_api_hosts:
    - hello-world-api.3scale.net
  ignore_test_failures:
    - echo-api.3scale.net

test:
  ignore_test_failures: []
  test_api_hosts:
    - echo-api.3scale.net
    - hello-world-api.3scale.net
  backend_host: '127.0.0.1:4001'
  backend_scheme: 'http'
  shared_secret: 'TEST'
  nginx_port: 8080
  sandbox_endpoint: 'https://%{system_name}-%{account_id}.staging.%{env}apicast.io:%{port}'
  hosted_proxy_endpoint: 'https://%{system_name}-%{account_id}.%{env}apicast.io:%{port}'
  apicast_staging_endpoint: 'http://%{system_name}-%{account_id}.staging.%{env}apicast.dev:8080'
  apicast_production_endpoint: 'http://%{system_name}-%{account_id}.%{env}apicast.dev:8080'
  skip_deploy: false
  apicast_registry_url: <%= ENV['APICAST_REGISTRY_URL'] %>

preview:
  <<: *default

production:
  <<: *default
