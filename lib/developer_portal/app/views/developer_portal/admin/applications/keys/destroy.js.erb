(function($) {
  var container = $("#application_keys");

  <%- if @remove -%>
    container.find("#application_key_<%= escape_javascript(@key) %>").fadeOut($.fn.remove);
  <%- else -%>
    $.flash.error('<%= escape_javascript(flash.now[:error]) %>');
  <%- end -%>

  <%- if @cinstance.application_keys.can_add? -%>
    container.find('.operations').enableSwitch();
  <%- else -%> // hide operations and show warning
    container.find('.operations').disableSwitch();
  <%- end -%>

  container.find('td.delete_key').<%= @cinstance.can_delete_key? ? 'fadeIn' : 'fadeOut' %>();

})(jQuery);
