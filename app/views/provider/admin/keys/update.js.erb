  <% if @cinstance.errors.empty? && @cinstance.valid? %>
    $.colorbox.close();
    document.getElementById('cinstance-user-key').innerHTML = '<%= @cinstance.user_key %>'
    $.flash.notice('<%= @notice %>')
  <% else %>
    <% if errors = @cinstance.errors[:user_key].presence %>
      const input = document.getElementById('cinstance_user_key')

      <%# HACK: Remove helperText and add it again, since replacing the text also removes the icon. %>
      input.closest('.pf-c-form__group-control').children[1].remove()

      input.insertAdjacentHTML('afterend', '<%= j render partial: "shared/pf_error_helper_text", locals: { error: errors.first } %>')
      input.setAttribute('aria-invalid', 'true')

      $.colorbox.resize();
    <% end %>
  <% end %>
