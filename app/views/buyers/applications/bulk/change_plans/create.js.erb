const plansCol = document.querySelector('[data-label="Plan"]') !== null;
const paidCol = document.querySelector('[data-label="Paid?"]') !== null;

<% applications.each do |app| %>
  <% plan = app.plan %>
  <% id = dom_id(app) %>

  <%# FIXME: these 2 if blocks should be handled by ruby, with the same conditions used when rendering the table %>
  if (plansCol) {
    document.querySelector('#<%= id %> td[data-label="Plan"]').innerHTML = '<%= j link_to_plan_edit(plan) %>'
  }

  if (paidCol) {
    document.querySelector('#<%= id %> td[data-label="Paid?"]').innerHTML = '<%= j plan_free_or_paid(plan) %>'
  }
<% end %>
$.colorbox.close()
$.flash('<%= j @notice %>')
