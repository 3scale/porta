{
  "openapi": "3.0.1",
  "info": {
    "title": "Billing API",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "https://example.com/"
    }
  ],
  "paths": {
    "/api/accounts/{account_id}/invoices.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice List by Account",
        "description": "Returns the list of all invoices by account. Note that results can be paginated. You can apply filters by month and by state of the invoices.",
        "operationId": "invoice_list_by_account",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "account_id",
            "in": "path",
            "description": "id of the account.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "x-data-threescale-name": "account_ids"
            },
            "x-data-threescale-name": "account_ids"
          },
          {
            "name": "state",
            "in": "query",
            "description": "Filter the invoice by state. 'open': line items can be added (only via web interface). 'pending': the invoice has been issued, no items can be added, the PDF has been generated and the invoice is waiting to be charged for. 'paid': sucessfully paid. 'unpaid': charging failed at least once. 'cancelled': the invoice was explicitely cancelled and is out of normal life-cycle.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "month",
            "in": "query",
            "description": "Filter the invoice by month. Format YYYY-MM, e.g. '2012-03' for march 2012",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page in the paginated list. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Number of results per page. Default and max is 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/accounts/{account_id}/invoices/{id}.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice by Account",
        "description": "Returns an invoice by id.",
        "operationId": "invoice_by_account",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "account_id",
            "in": "path",
            "description": "id of the account.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "x-data-threescale-name": "account_ids"
            },
            "x-data-threescale-name": "account_ids"
          },
          {
            "name": "id",
            "in": "path",
            "description": "id of the invoice.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/invoices.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice List",
        "description": "Returns the list of all invoices. Note that results can be paginated. You can apply filters by month and by state of the invoices.",
        "operationId": "invoice_list",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "state",
            "in": "query",
            "description": "Filter the invoice by state. 'open': line items can be added (only via web interface). 'pending': the invoice has been issued, no items can be added, the PDF has been generated and the invoice is waiting to be charged for. 'paid': sucessfully paid. 'unpaid': charging failed at least once. 'cancelled': the invoice was explicitely cancelled and is out of normal life-cycle.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "month",
            "in": "query",
            "description": "Filter the invoice by month. Format YYYY-MM, e.g. '2012-03' for march 2012",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page in the paginated list. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "per_page",
            "in": "query",
            "description": "Number of results per page. Default and max is 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/invoices/{id}.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice",
        "description": "Returns an invoice by id.",
        "operationId": "invoice_show",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "id",
            "in": "path",
            "description": "id of the invoice.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/invoices/{id}/state.xml": {
      "put": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice",
        "description": "Modifies the state of the invoice.",
        "operationId": "invoice_state",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "id",
            "in": "path",
            "description": "id of the invoice.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "State of the invoice to set. Only 'cancel' value is allowed",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "state"
            },
            "x-data-threescale-name": "state"
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/invoices/{invoice_id}/line_items.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice Line Items List",
        "description": "Returns the list of all line items of an invoice.",
        "operationId": "invoice_line_items_list",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "invoice_id",
            "in": "path",
            "description": "id of the invoice.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    },
    "/api/invoices/{invoice_id}/payment_transactions.xml": {
      "get": {
        "tags": [
          "Finances"
        ],
        "summary": "Invoice Payment Transactions List",
        "description": "Returns the list of all payment transactions of an invoice.",
        "operationId": "invoice_payment_transactions_list",
        "parameters": [
          {
            "name": "provider_key",
            "in": "query",
            "description": "Your api key with 3scale",
            "required": true,
            "schema": {
              "type": "string",
              "x-data-threescale-name": "api_keys"
            },
            "x-data-threescale-name": "api_keys"
          },
          {
            "name": "invoice_id",
            "in": "path",
            "description": "id of the invoice.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "No response was specified",
            "content": {}
          }
        }
      }
    }
  },
  "components": {}
}